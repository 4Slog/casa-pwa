/**
 * Page Layout - DEFINITIVE RULES
 * This file loaded LAST - overrides everything
 *
 * MATH:
 * - 6 pages total
 * - Wrapper width: 600vw (6 Ã— 100vw)
 * - Each page: 100vw
 * - Transform per page: 100vw = 16.667% of 600vw
 */

/* Main app container */
.main-app {
  display: flex;
  flex-direction: column;
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height for mobile */
  overflow: hidden;
  width: 100vw;
  max-width: 100vw;
}

/* Pages wrapper - horizontal slider */
.pages-wrapper {
  display: flex;
  flex-direction: row;
  flex-wrap: nowrap;
  width: 600vw;
  flex: 1;
  min-height: 0;
  transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform;
}

/* Individual page */
.page {
  width: 100vw;
  min-width: 100vw;
  max-width: 100vw;
  flex: 0 0 100vw;
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* Page content container */
.page-content {
  width: 100%;
  max-width: 100%;
  min-height: 100%;
  padding: var(--space-md);
  padding-bottom: calc(80px + var(--space-xl) + env(safe-area-inset-bottom, 0px));
  box-sizing: border-box;
}

/* Specific page IDs - explicit widths */
#page-lights,
#page-climate,
#page-calendar,
#page-family,
#page-cameras,
#page-media {
  width: 100vw;
  min-width: 100vw;
  max-width: 100vw;
  flex: 0 0 100vw;
}

/* All direct children of pages must not overflow */
.page > * {
  max-width: 100%;
}

/* Section headers */
.section-header {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* Grid containers - prevent overflow */
.device-grid,
.family-grid,
.camera-grid,
.speaker-grid,
.playlist-grid,
.weather-grid,
.room-temps-grid,
.tasks-container,
.calendar-events,
.calendar-week {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}

/* Map container - centered, square */
.map-container {
  width: min(66.67%, 500px);
  aspect-ratio: 1 / 1;
  margin: 0 auto;
  box-sizing: border-box;
}

/* Camera featured - centered, square */
.camera-featured {
  width: min(66.67%, 500px);
  margin: 0 auto var(--space-lg) auto;
  box-sizing: border-box;
}

.camera-featured .camera-stream {
  aspect-ratio: 1 / 1;
  width: 100%;
}

/* Media player */
.media-player {
  width: 100%;
  max-width: 100%;
  box-sizing: border-box;
}
